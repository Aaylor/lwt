<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Module Lwt_log </title><meta charset="utf8"/><link rel="stylesheet" href="/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script src="/client.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js"></script></head><body><h1>Module <span><a class="ocsforge_doclink_lwt" href="/lwt/3.1.0/api/Lwt_log">Lwt_log</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Lwt_log</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a class="ocsforge_doclink_lwt" href="/lwt/3.1.0/api/Lwt_log">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p>Logging facility
</p><hr/><p>This module provides functions to deal with logging.
It extends <span><a class="ocsforge_doclink_lwt" href="/lwt/3.1.0/api/Lwt_log_core">Lwt_log_core</a></span> with Unix features.
It adds:
</p><ul><li> logging to the syslog daemon
</li><li> logging to a channel (stderr, stdout, ...)
</li><li> logging to a file
</li></ul><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">include</span> <span><a class="ocsforge_doclink_lwt" href="/lwt/3.1.0/api/Lwt_log_core">Lwt_log_core</a></span></pre><pre class="ocsforge_color odocwiki_code" id="VALrender"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">render</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">buffer:</span><span class="ocsforge_color_uid">Buffer</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">template:</span>template <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">section:</span>section <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">level:</span>level <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">message:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Same as <span><a class="ocsforge_doclink_lwt" href="/lwt/3.1.0/api/Lwt_log_core#VALrender">Lwt_log_core.​render</a></span>, except that the template may also contain the
following variables:
</p><ul><li> <span class="odocwiki_inlinecode">date</span>, which will be replaced with the current local date and time,
</li><li> <span class="odocwiki_inlinecode">milliseconds</span>, which will be replaced by the fractional part of the current Unix
time, to millisecond accuracy.
</li></ul><p>For example:
</p><ul><li> <span class="odocwiki_inlinecode">&quot;$(date) $(name)[$(pid)]: $(message)&quot;</span>
</li><li> <span class="odocwiki_inlinecode">&quot;$(date).$(milliseconds) $(name)[$(pid)]: $(message)&quot;</span>
</li><li> <span class="odocwiki_inlinecode">&quot;$(date): $(loc-file): $(loc-line): $(loc-column): $(message)&quot;</span></li></ul></div><pre class="ocsforge_color odocwiki_code" id="TYPEsyslog_facility"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">syslog_facility</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><br/>  [ `Auth<br/>  | `Authpriv<br/>  | `Console<br/>  | `Cron<br/>  | `Daemon<br/>  | `FTP<br/>  | `Kernel<br/>  | `LPR<br/>  | `Local0<br/>  | `Local1<br/>  | `Local2<br/>  | `Local3<br/>  | `Local4<br/>  | `Local5<br/>  | `Local6<br/>  | `Local7<br/>  | `Mail<br/>  | `NTP<br/>  | `News<br/>  | `Security<br/>  | `Syslog<br/>  | `UUCP<br/>  | `User ]</span></pre><div class="odocwiki_info"><p>Syslog facility. Look at the SYSLOG(3) man page for a description
of syslog facilities</p></div><pre class="ocsforge_color odocwiki_code" id="VALsyslog"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">syslog</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?template:</span>template <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?paths:</span>string list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">facility:</span><span><a class="ocsforge_doclink_lwt" href="/lwt/3.1.0/api/Lwt_log#TYPEsyslog_facility">syslog_facility</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> logger</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">syslog ?template ?paths ~facility ()</span> creates an logger
which send message to the system logger.</p></div><div class="odocwiki_param_info"><p><span class="code">template</span> : defaults to <span class="odocwiki_inlinecode">&quot;$(date) $(name)[$(pid)]: $(section): $(message)&quot;</span></p></div><div class="odocwiki_param_info"><p><span class="code">paths</span> : is a list of path to try for the syslogd socket. It
default to <span class="odocwiki_inlinecode">[&quot;/dev/log&quot;; &quot;/var/run/log&quot;]</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALfile"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">file</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?template:</span>template <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?mode:</span>[ `Append | `Truncate ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?perm:</span><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">file_perm</span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">file_name:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> logger <span><a class="ocsforge_doclink_lwt" href="/lwt/3.1.0/api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">desf_file ?template ?mode ?perm ~file_name ()</span> creates an
logger which will write messages to <span class="odocwiki_inlinecode">file_name</span>.
</p><ul><li> if <span class="odocwiki_inlinecode">mode = `Truncate</span> then the file is truncated and previous
contents will be lost.
</li></ul><ul><li> if <span class="odocwiki_inlinecode">mode = `Append</span>, new messages will be appended at the end
of the file</li></ul></div><div class="odocwiki_param_info"><p><span class="code">template</span> : defaults to <span class="odocwiki_inlinecode">&quot;$(date): $(section): $(message)&quot;</span></p></div><div class="odocwiki_param_info"><p><span class="code">mode</span> : defaults to <span class="odocwiki_inlinecode">`Append</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALchannel"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">channel</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?template:</span>template <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">close_mode:</span>[ `Close | `Keep ] <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">channel:</span><span><a class="ocsforge_doclink_lwt" href="/lwt/3.1.0/api/Lwt_io#TYPEoutput_channel">Lwt_io.output_channel</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> logger</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">channel ?template ~close_mode ~channel ()</span> creates a logger
from a channel.
</p><p>If <span class="odocwiki_inlinecode">close_mode = `Close</span> then <span class="odocwiki_inlinecode">channel</span> is closed when the
logger is closed, otherwise it is left open.</p></div><div class="odocwiki_param_info"><p><span class="code">template</span> : defaults to <span class="odocwiki_inlinecode">&quot;$(name): $(section): $(message)&quot;</span></p></div></body></html>
